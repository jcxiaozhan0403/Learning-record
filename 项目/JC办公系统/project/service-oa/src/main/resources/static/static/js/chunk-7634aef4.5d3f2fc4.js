(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7634aef4"],{"5a78":function(e,t,s){"use strict";var a=s("b775"),n="/admin/system/sysMenu";t["a"]={findNodes:function(){return Object(a["a"])({url:"".concat(n,"/findNodes"),method:"get"})},removeById:function(e){return Object(a["a"])({url:"".concat(n,"/remove/").concat(e),method:"delete"})},save:function(e){return Object(a["a"])({url:"".concat(n,"/save"),method:"post",data:e})},updateById:function(e){return Object(a["a"])({url:"".concat(n,"/update"),method:"put",data:e})},toAssign:function(e){return Object(a["a"])({url:"".concat(n,"/toAssign/").concat(e),method:"get"})},doAssign:function(e){return Object(a["a"])({url:"".concat(n,"/doAssign"),method:"post",data:e})}}},"861c":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"tools-div"},[s("el-button",{attrs:{type:"success",icon:"el-icon-plus",size:"mini",disabled:!1===e.$hasBP("bnt.sysMenu.add")},on:{click:function(t){return e.add()}}},[e._v("添 加")])],1),s("el-table",{staticStyle:{width:"100%","margin-bottom":"20px","margin-top":"10px"},attrs:{data:e.sysMenuList,"row-key":"id",border:"","default-expand-all":!1,"tree-props":{children:"children"}}},[s("el-table-column",{attrs:{prop:"name",label:"菜单名称",width:"160"}}),s("el-table-column",{attrs:{label:"图标",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("i",{class:e.row.icon})]}}])}),s("el-table-column",{attrs:{prop:"perms",label:"权限标识"}}),s("el-table-column",{attrs:{prop:"path",label:"路由地址",width:"250"}}),s("el-table-column",{attrs:{prop:"component",label:"组件路径",width:"160"}}),s("el-table-column",{attrs:{prop:"sortValue",label:"排序",width:"60",align:"center"}}),s("el-table-column",{attrs:{label:"状态",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-switch",{attrs:{disabled:"true"},model:{value:1===t.row.status,callback:function(s){e.$set(t.row,"status === 1",s)},expression:"scope.row.status === 1"}})]}}])}),s("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"160"}}),s("el-table-column",{attrs:{label:"操作",width:"180",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[2!==t.row.type?s("el-button",{attrs:{type:"success",icon:"el-icon-plus",size:"mini",disabled:!1===e.$hasBP("bnt.sysMenu.add"),title:"添加下级节点"},on:{click:function(s){return e.add(t.row)}}}):e._e(),s("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini",disabled:!1===e.$hasBP("bnt.sysMenu.update"),title:"修改"},on:{click:function(s){return e.edit(t.row)}}}),s("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",title:"删除",disabled:t.row.children.length>0||!1===e.$hasBP("bnt.sysMenu.remove")},on:{click:function(s){return e.removeDataById(t.row.id)}}})]}}])})],1),s("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("el-form",{ref:"dataForm",staticStyle:{"padding-right":"40px"},attrs:{model:e.sysMenu,"label-width":"150px",size:"small"}},[""===e.sysMenu.id?s("el-form-item",{attrs:{label:"上级部门"}},[s("el-input",{attrs:{disabled:"true"},model:{value:e.sysMenu.parentName,callback:function(t){e.$set(e.sysMenu,"parentName",t)},expression:"sysMenu.parentName"}})],1):e._e(),s("el-form-item",{attrs:{label:"菜单类型",prop:"type"}},[s("el-radio-group",{attrs:{disabled:e.typeDisabled},model:{value:e.sysMenu.type,callback:function(t){e.$set(e.sysMenu,"type",t)},expression:"sysMenu.type"}},[s("el-radio",{attrs:{label:0,disabled:e.type0Disabled}},[e._v("目录")]),s("el-radio",{attrs:{label:1,disabled:e.type1Disabled}},[e._v("菜单")]),s("el-radio",{attrs:{label:2,disabled:e.type2Disabled}},[e._v("按钮")])],1)],1),s("el-form-item",{attrs:{label:"菜单名称",prop:"name"}},[s("el-input",{model:{value:e.sysMenu.name,callback:function(t){e.$set(e.sysMenu,"name",t)},expression:"sysMenu.name"}})],1),2!==e.sysMenu.type?s("el-form-item",{attrs:{label:"图标",prop:"icon"}},[s("el-select",{attrs:{clearable:""},model:{value:e.sysMenu.icon,callback:function(t){e.$set(e.sysMenu,"icon",t)},expression:"sysMenu.icon"}},e._l(e.iconList,(function(t){return s("el-option",{key:t.class,attrs:{label:t.class,value:t.class}},[s("span",{staticStyle:{float:"left"}},[s("i",{class:t.class})]),s("span",{staticStyle:{"padding-left":"6px"}},[e._v(e._s(t.class))])])})),1)],1):e._e(),s("el-form-item",{attrs:{label:"排序"}},[s("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:e.sysMenu.sortValue,callback:function(t){e.$set(e.sysMenu,"sortValue",t)},expression:"sysMenu.sortValue"}})],1),s("el-form-item",{attrs:{prop:"path"}},[s("span",{attrs:{slot:"label"},slot:"label"},[s("el-tooltip",{attrs:{content:"访问的路由地址，如：`sysUser`",placement:"top"}},[s("i",{staticClass:"el-icon-question"})]),e._v(" 路由地址 ")],1),s("el-input",{attrs:{placeholder:"请输入路由地址"},model:{value:e.sysMenu.path,callback:function(t){e.$set(e.sysMenu,"path",t)},expression:"sysMenu.path"}})],1),0!==e.sysMenu.type?s("el-form-item",{attrs:{prop:"component"}},[s("span",{attrs:{slot:"label"},slot:"label"},[s("el-tooltip",{attrs:{content:"访问的组件路径，如：`system/user/index`，默认在`views`目录下",placement:"top"}},[s("i",{staticClass:"el-icon-question"})]),e._v(" 组件路径 ")],1),s("el-input",{attrs:{placeholder:"请输入组件路径"},model:{value:e.sysMenu.component,callback:function(t){e.$set(e.sysMenu,"component",t)},expression:"sysMenu.component"}})],1):e._e(),2===e.sysMenu.type?s("el-form-item",[s("el-input",{attrs:{placeholder:"请输入权限标识",maxlength:"100"},model:{value:e.sysMenu.perms,callback:function(t){e.$set(e.sysMenu,"perms",t)},expression:"sysMenu.perms"}}),s("span",{attrs:{slot:"label"},slot:"label"},[s("el-tooltip",{attrs:{content:"控制器中定义的权限字符，如：@PreAuthorize(hasAuthority('bnt.sysRole.list'))",placement:"top"}},[s("i",{staticClass:"el-icon-question"})]),e._v(" 权限字符 ")],1)],1):e._e(),s("el-form-item",{attrs:{label:"状态",prop:"type"}},[s("el-radio-group",{model:{value:e.sysMenu.status,callback:function(t){e.$set(e.sysMenu,"status",t)},expression:"sysMenu.status"}},[s("el-radio",{attrs:{label:1}},[e._v("正常")]),s("el-radio",{attrs:{label:0}},[e._v("停用")])],1)],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small",icon:"el-icon-refresh-right"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"small"},on:{click:function(t){return e.saveOrUpdate()}}},[e._v("确 定")])],1)],1)],1)},n=[],l=(s("b0c0"),s("5a78")),i={id:"",parentId:"",name:"",type:0,path:"",component:"",perms:"",icon:"",sortValue:1,status:1},o={data:function(){return{sysMenuList:[],expandKeys:[],typeDisabled:!1,type0Disabled:!1,type1Disabled:!1,type2Disabled:!1,dialogTitle:"",dialogVisible:!1,sysMenu:i,saveBtnDisabled:!1,iconList:[{class:"el-icon-s-tools"},{class:"el-icon-s-custom"},{class:"el-icon-setting"},{class:"el-icon-user-solid"},{class:"el-icon-s-help"},{class:"el-icon-phone"},{class:"el-icon-s-unfold"},{class:"el-icon-s-operation"},{class:"el-icon-more-outline"},{class:"el-icon-s-check"},{class:"el-icon-tickets"},{class:"el-icon-s-goods"},{class:"el-icon-document-remove"},{class:"el-icon-warning"},{class:"el-icon-warning-outline"},{class:"el-icon-question"},{class:"el-icon-info"}]}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;l["a"].findNodes().then((function(t){e.sysMenuList=t.data,console.log(e.sysMenuList)}))},removeDataById:function(e){var t=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return l["a"].removeById(e)})).then((function(e){t.fetchData(),t.$message({type:"success",message:"删除成功!"})})).catch((function(){t.$message.info("取消删除")}))},add:function(e){this.typeDisabled=!1,this.dialogTitle="添加下级节点",this.dialogVisible=!0,this.sysMenu=Object.assign({},i),this.sysMenu.id="",e?(this.sysMenu.parentId=e.id,this.sysMenu.parentName=e.name,0===e.type?(this.sysMenu.type=1,this.typeDisabled=!1,this.type0Disabled=!1,this.type1Disabled=!1,this.type2Disabled=!0):1===e.type&&(this.sysMenu.type=2,this.typeDisabled=!0)):(this.dialogTitle="添加目录节点",this.sysMenu.type=0,this.sysMenu.component="Layout",this.sysMenu.parentId=0,this.typeDisabled=!0)},edit:function(e){this.dialogTitle="修改节点",this.dialogVisible=!0,this.sysMenu=Object.assign({},e),this.typeDisabled=!0},saveOrUpdate:function(){var e=this;0===this.sysMenu.type&&0!==this.sysMenu.parentId&&(this.sysMenu.component="ParentView"),this.$refs.dataForm.validate((function(t){t&&(e.saveBtnDisabled=!0,e.sysMenu.id?e.updateData():e.saveData())}))},saveData:function(){var e=this;l["a"].save(this.sysMenu).then((function(t){e.$message.success(t.message||"操作成功"),e.dialogVisible=!1,e.fetchData(e.page)}))},updateData:function(){var e=this;l["a"].updateById(this.sysMenu).then((function(t){e.$message.success(t.message||"操作成功"),e.dialogVisible=!1,e.fetchData()}))}}},c=o,r=s("2877"),u=Object(r["a"])(c,a,n,!1,null,null,null);t["default"]=u.exports}}]);